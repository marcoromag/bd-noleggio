(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{128:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(33),c=n.n(l),o=(n(84),n(18)),u=n(7),s={login:{isLoggedIn:!1},setLogin:function(){}},i=a.createContext(s),m=function(){var e=a.useContext(i);return[e.login,e.setLogin]},E=function(e){var t=e.children,n=a.useState(Object(o.a)({},s,{setLogin:function(e){c(Object(o.a)({},l,{login:e}))}})),r=Object(u.a)(n,2),l=r[0],c=r[1];return a.createElement(i.Provider,{value:l},t)},p=n(76),d=n(14),f=(n(85),n(4)),g=n.n(f),h=n(147),v=n(148),b=n(149),x=n(150),S=n(151),w=n(152),C=n(153),O=n(154),j=n(155),k=n(72),y=n(69),_=n(78),N=n(38),T=n(70),z=n(77),I={apiBaseUrl:"/noleggio/api"},L=function(e){function t(e,n){var a;return Object(y.a)(this,t),(a=Object(_.a)(this,Object(N.a)(t).call(this,n))).httpCode=void 0,a.httpCode=e,a}return Object(T.a)(t,e),t}(Object(z.a)(Error));function P(e,t){var n,a,r,l,c;return g.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return n=t&&t.headers,a=t&&["POST","PUT","PATCH"].includes(t.method||"GET")&&{"Content-Type":"application/json",Accept:"application/json"},r=Object(o.a)({},t,{headers:Object(o.a)({},a,{},n),credentials:"include"}),u.next=5,g.a.awrap(fetch(I.apiBaseUrl+e,r));case 5:if((l=u.sent).ok){u.next=14;break}if(!(l.status>=500)){u.next=9;break}throw new L(l.status,"Errore sul server");case 9:if(!(l.status>=400)){u.next=14;break}return u.next=12,g.a.awrap(l.json());case 12:throw c=u.sent,new L(l.status,c.messaggio);case 14:return u.abrupt("return",l);case 15:case"end":return u.stop()}}))}var B=function(e,t){var n;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(P("/utente/login",{method:"POST",body:JSON.stringify({utente:e,password:t})}));case 2:return n=a.sent,a.abrupt("return",n.json());case 4:case"end":return a.stop()}}))},G=function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.awrap(P("/utente/logout",{method:"POST"}));case 2:case"end":return e.stop()}}))},D=n(171),A=n(145),F=n(146),R=function(e){var t=e.error;return t?a.createElement(D.a,null,a.createElement(A.a,null,"Attenzione"),a.createElement(F.a,null,t)):null},J=function(){var e=a.useState({utente:"",password:""}),t=Object(u.a)(e,2),n=t[0],r=t[1],l=a.useState(),c=Object(u.a)(l,2),s=c[0],i=c[1],E=m(),p=Object(u.a)(E,2)[1],f=Object(d.f)(),y=a.useCallback((function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.awrap(B(n.utente,n.password));case 3:e=t.sent,p({isLoggedIn:!0,user:e}),f.push("/"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),p({isLoggedIn:!1}),i(t.t0.message);case 12:case"end":return t.stop()}}),null,null,[[0,8]])}),[n,f,p]),_=a.useCallback((function(e){r(Object(o.a)({},n,{utente:e.target.value})),i(void 0)}),[n]),N=a.useCallback((function(e){r(Object(o.a)({},n,{password:e.target.value})),i(void 0)}),[n]),T=!n.utente||!n.password;return a.createElement(h.a,{fluid:!0},a.createElement(v.a,null,a.createElement(b.a,{sm:"9",md:"7",lg:"5",className:"mx-auto my-5"},a.createElement(x.a,null,a.createElement(S.a,null,a.createElement(w.a,null,a.createElement("h5",null,"Log In")),a.createElement(R,{error:s}),a.createElement(C.a,null,a.createElement(O.a,{for:"nomeUtente"},"Nome utente"),a.createElement(j.a,{type:"email",name:"user",id:"nomeUtente",onChange:_})),a.createElement(C.a,null,a.createElement(O.a,{for:"password"},"Password"),a.createElement(j.a,{type:"password",name:"password",id:"password",onChange:N})),a.createElement(C.a,null,a.createElement(k.a,{disabled:T,color:"primary",onClick:y},"Accedi")))))))},U=n(26),W=function(e){var t=e.children,n=Object(U.a)(e,["children"]),r=m(),l=Object(u.a)(r,1)[0];return a.createElement(d.b,Object.assign({},n,{render:function(e){var n=e.location;return l.isLoggedIn?t:a.createElement(d.a,{to:{pathname:"/login",state:{from:n}}})}}))},M=n(157),Z=function(e){var t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(P("/batch/scarico",{method:"POST",body:JSON.stringify({fornitore:e})}));case 2:return t=n.sent,n.abrupt("return",t.json());case 4:case"end":return n.stop()}}))},H=function(e,t){var n;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(P("/batch/carico",{method:"POST",body:JSON.stringify({fornitore:e,lista:t})}));case 2:return n=a.sent,a.abrupt("return",n.json());case 4:case"end":return a.stop()}}))},Q=n(156),V=function(e){var t=e.batch;return a.createElement(a.Fragment,null,a.createElement(b.a,{xs:"6",sm:"3"},"Batch id"),a.createElement(b.a,{xs:"6",sm:"9"},t.batch_id),a.createElement(b.a,{xs:"6",sm:"3"},"Tipo"),a.createElement(b.a,{xs:"6",sm:"9"},t.tipo),a.createElement(b.a,{xs:"6",sm:"3"},"Esito"),a.createElement(b.a,{xs:"6",sm:"9"},t.esito),a.createElement(b.a,{xs:"6",sm:"3"},"Data"),a.createElement(b.a,{xs:"6",sm:"9"},t.data),a.createElement(b.a,{xs:"6",sm:"3"},"Impiegato"),a.createElement(b.a,{xs:"6",sm:"9"},t.impiegato),a.createElement(b.a,{xs:"12"},a.createElement("h2",null,"Supporti")),a.createElement(b.a,{xs:"12"},a.createElement(Q.a,null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"id"),a.createElement("th",null,"Seriale"),a.createElement("th",null,"Video"),a.createElement("th",null,"Fornitore"),a.createElement("th",null,"Data Carico"),a.createElement("th",null,"Data Scarico"),a.createElement("th",null,"Stato fisico"))),a.createElement("tbody",null,t.supporti&&t.supporti.map((function(e){return a.createElement("tr",{key:e.id},a.createElement("th",null,e.id),a.createElement("td",null,e.seriale),a.createElement("td",null,e.video),a.createElement("td",null,e.fornitore),a.createElement("td",null,e.data_carico),a.createElement("td",null,e.data_scarico),a.createElement("td",null,e.stato_fisico))}))))))},q=function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.awrap(P("/fornitori",{method:"GET"}));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}))},K=function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.awrap(P("/termini_noleggio",{method:"GET"}));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}))},X=function(e){var t=e.onLoadError,n=Object(U.a)(e,["onLoadError"]),r=a.useState(),l=Object(u.a)(r,2),c=l[0],o=l[1];return a.useEffect((function(){q().then((function(e){o(e)})).catch((function(e){t&&t(e.message)}))}),[]),a.createElement(j.a,Object.assign({},n,{type:"select"}),c&&c.map((function(e){return a.createElement("option",{key:e.id,value:e.id},e.nome)})))},$=function(){var e=a.useState(),t=Object(u.a)(e,2),n=t[0],r=t[1],l=a.useState(),c=Object(u.a)(l,2),o=c[0],s=c[1],i=a.useState(),m=Object(u.a)(i,2),E=m[0],p=m[1],d=a.useCallback((function(e){s(e.target.value)}),[]),f=a.useCallback((function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=p,e.next=4,g.a.awrap(Z(o));case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),r(e.t2.message);case 11:case"end":return e.stop()}}),null,null,[[0,8]])}),[o]);return a.createElement(h.a,null,a.createElement(v.a,null,a.createElement(b.a,{xs:"12"},a.createElement("h1",null,"Batch di scarico")),a.createElement(b.a,{xs:"12"},a.createElement("p",null,"Per iniziare un batch di scarico, seleziona il fornitore")),a.createElement(b.a,{xs:"12"},a.createElement(R,{error:n}),a.createElement(M.a,null,a.createElement(C.a,null,a.createElement(O.a,{for:"password"},"Fornitore"),a.createElement(X,{onChange:d,onLoadError:r})),a.createElement(C.a,null,a.createElement(k.a,{disabled:!o,onClick:f},"Avvia esecuzione"))))),E&&a.createElement(V,{batch:E}))},Y=function(e){var t=e.titolo,n=e.errore,a=e.children;return r.a.createElement(h.a,null,r.a.createElement(v.a,null,t&&r.a.createElement(b.a,{xs:"12"},r.a.createElement("h1",null,t)),r.a.createElement(b.a,{xs:"12"},r.a.createElement(R,{error:n}))),r.a.createElement(v.a,null,a))},ee=function(e){return e.split("\n").map((function(e){var t=e.split(",");return{video:t[0],seriale:t[1],costo_supporto:parseFloat(t[3])}}))},te=function(){var e=a.useState(),t=Object(u.a)(e,2),n=t[0],r=t[1],l=a.useState(),c=Object(u.a)(l,2),o=c[0],s=c[1],i=a.useState(),m=Object(u.a)(i,2),E=m[0],p=m[1],d=a.useState(),f=Object(u.a)(d,2),h=f[0],v=f[1],x=a.useCallback((function(e){s(e.target.value)}),[]),S=a.useCallback((function(e){p(e.target.value)}),[]),w=a.useCallback((function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=ee(E),t.t0=v,t.next=5,g.a.awrap(H(o,e));case 5:t.t1=t.sent,(0,t.t0)(t.t1),t.next=12;break;case 9:t.prev=9,t.t2=t.catch(0),r(t.t2.message);case 12:case"end":return t.stop()}}),null,null,[[0,9]])}),[o,E]);return a.createElement(Y,{titolo:"Batch di carico",errore:n},a.createElement(b.a,{xs:"12"},a.createElement(M.a,null,a.createElement(C.a,null,a.createElement(O.a,null,"Fornitore"),a.createElement(X,{onChange:x,onLoadError:r})),a.createElement(C.a,null,a.createElement(O.a,null,"Lista dei video da caricare"),a.createElement(j.a,{type:"textarea",onChange:S})),a.createElement(C.a,null,a.createElement(k.a,{disabled:!o||!E,onClick:w},"Avvia esecuzione")))),h&&a.createElement(V,{batch:h}))},ne=function(e){var t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(P("/catalogo/ricerca/titolo?titolo=".concat(e),{method:"GET"}));case 2:return t=n.sent,n.abrupt("return",t.json());case 4:case"end":return n.stop()}}))},ae=function(e){var t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(P("/video/".concat(e,"/supporti"),{method:"GET"}));case 2:return t=n.sent,n.abrupt("return",t.json());case 4:case"end":return n.stop()}}))},re=n(158),le=n(159),ce=function(e){var t=e.video,n=e.onSelect,r=a.useCallback((function(){n&&n(t)}),[t,n]);return a.createElement(x.a,{className:"mb-4"},a.createElement(re.a,null,a.createElement("h5",null,t.titolo),n&&a.createElement(k.a,{className:"ml-auto",onClick:r},"Seleziona")),a.createElement(S.a,null,a.createElement(v.a,null,a.createElement(b.a,{xs:"12",sm:"4"},a.createElement(le.a,null,"Id"),a.createElement("p",null,t.id)),a.createElement(b.a,{xs:"12",sm:"4"},a.createElement(le.a,null,"Genere"),a.createElement("p",null,t.genere)),a.createElement(b.a,{xs:"12",sm:"4"},a.createElement(le.a,null,"Regista"),a.createElement("p",null,t.regista)),a.createElement(b.a,{xs:"12",sm:"4"},a.createElement(le.a,null,"Casa produttrice"),a.createElement("p",null,t.casa_produttrice)),a.createElement(b.a,{xs:"12",sm:"4"},a.createElement(le.a,null,"Quantit\xe0 disponibile"),a.createElement("p",null,t.quantita_disponibile)))))},oe=function(e){var t=e.onSelect,n=a.useState(),r=Object(u.a)(n,2),l=r[0],c=r[1],o=a.useState(),s=Object(u.a)(o,2),i=s[0],m=s[1],E=a.useState(),p=Object(u.a)(E,2),d=p[0],f=p[1],h=a.useCallback((function(e){m(e.target.value)}),[]),x=a.useCallback((function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=f,e.next=4,g.a.awrap(ne(i));case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),c(e.t2.message);case 11:case"end":return e.stop()}}),null,null,[[0,8]])}),[i]);return a.createElement(a.Fragment,null,a.createElement(b.a,{xs:"12"},a.createElement(R,{error:l}),a.createElement(v.a,null,a.createElement(b.a,{xs:"12",sm:!0},a.createElement(C.a,null,a.createElement(O.a,null,"Titolo"),a.createElement(j.a,{type:"text",onChange:h}))),a.createElement(b.a,{xs:"12",sm:"auto",className:"d-flex align-items-end"},a.createElement(C.a,null,a.createElement(k.a,{disabled:!i,onClick:x},"Cerca"))))),a.createElement(b.a,{xs:"12"},d&&d.map((function(e){return a.createElement(ce,{key:e.id,video:e,onSelect:t})}))))},ue=function(){return a.createElement(h.a,null,a.createElement(v.a,null,a.createElement(b.a,{xs:"12"},a.createElement("h1",null,"Ricerca per titolo")),a.createElement(oe,null)))},se=n(160),ie=function(){return a.createElement(se.a,{className:"mx-auto",color:"info"})},me=function(e,t,n){var a;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(P("/noleggio",{method:"POST",body:JSON.stringify({cod_fiscale:e,termine:t,supporto:n})}));case 2:return a=r.sent,r.abrupt("return",a.json());case 4:case"end":return r.stop()}}))},Ee=function(e,t){var n;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(P("/noleggio/".concat(e),{method:"POST",body:JSON.stringify({stato:t})}));case 2:return n=a.sent,a.abrupt("return",n.json());case 4:case"end":return a.stop()}}))},pe=function(e){var t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(P("/cliente/".concat(e,"/noleggi"),{method:"GET"}));case 2:return t=n.sent,n.abrupt("return",t.json());case 4:case"end":return n.stop()}}))},de=function(e,t){var n;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(P("/cliente?nome=".concat(e,"&cognome=").concat(t),{method:"GET"}));case 2:return n=a.sent,a.abrupt("return",n.json());case 4:case"end":return a.stop()}}))},fe=function(e){var t=e.onSelect,n=a.useState({nome:"",cognome:""}),r=Object(u.a)(n,2),l=r[0],c=r[1],s=a.useState(),i=Object(u.a)(s,2),m=i[0],E=i[1],p=a.useCallback((function(e){return c(Object(o.a)({},l,{nome:e.target.value}))}),[l]),d=a.useCallback((function(e){return c(Object(o.a)({},l,{cognome:e.target.value}))}),[l]),f=a.useCallback((function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.awrap(de(l.cognome,l.nome));case 2:e=t.sent,E(e);case 4:case"end":return t.stop()}}))}),[l]);return a.createElement(a.Fragment,null,a.createElement(b.a,{xs:"12"},a.createElement(v.a,null,a.createElement(b.a,{xs:"12",sm:""},a.createElement(C.a,null,a.createElement(O.a,null,"Cognome"),a.createElement(j.a,{type:"text",onChange:p}))),a.createElement(b.a,{xs:"12",sm:"4"},a.createElement(C.a,null,a.createElement(O.a,null,"Nome"),a.createElement(j.a,{type:"text",onChange:d}))),a.createElement(b.a,{xs:"12",sm:"auto",className:"d-flex align-items-end"},a.createElement(C.a,null,a.createElement(k.a,{disabled:!l.nome&&!l.cognome,onClick:f},"Cerca"))))),m&&a.createElement(b.a,{xs:"12"},a.createElement(Q.a,null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Nome"),a.createElement("th",null,"Cognome"),a.createElement("th",null,"Codice fiscale"),a.createElement("th",null,"Telefono abitazione"),a.createElement("th",null,"Telefono cellulare"),a.createElement("th",null))),a.createElement("tbody",null,m.map((function(e){return a.createElement("tr",{key:e.cod_fiscale},a.createElement("td",null,e.nome),a.createElement("td",null,e.cognome),a.createElement("td",null,e.cod_fiscale),a.createElement("td",null,e.telefono_abitazione),a.createElement("td",null,e.telefono_cellulare),a.createElement("td",null,a.createElement(k.a,{onClick:function(){return t(e)}},"Seleziona")))}))))))},ge=function(e){var t=e.termine;return a.createElement(x.a,null,a.createElement(re.a,null,a.createElement("h5",null,"Termine di noleggio")),a.createElement(S.a,null,t.giorni," giorni"))},he=function(e){var t=e.cliente;return a.createElement(x.a,null,a.createElement(re.a,null,a.createElement("h5",null,"Cliente")),a.createElement(S.a,null,t.cognome," ",t.nome))},ve=function(e){var t=e.video;return a.createElement(x.a,null,a.createElement(re.a,null,a.createElement("h5",null,"Video")),a.createElement(S.a,null,t.titolo))},be=function(e){var t=e.supporto;return a.createElement(x.a,null,a.createElement(re.a,null,a.createElement("h5",null,"Supporto")),a.createElement(S.a,null,t.id))},xe=function(e){var t=e.noleggio;return a.createElement(x.a,null,a.createElement(re.a,null,a.createElement("h5",null,"Noleggio")),a.createElement(S.a,null,t.id))},Se=n(24),we=n.n(Se),Ce=function(e){var t=e.steps,n=e.corrente,r=e.stepClick,l="".concat(100/t.length,"%"),c="".concat(100*n/(t.length-1),"%");return a.createElement(b.a,{xs:"12"},a.createElement("div",{className:we.a["progress-bar-wrapper"]},a.createElement("div",{className:we.a["status-bar"],style:{width:"80%"}},a.createElement("div",{className:we.a["current-status"],style:{width:c,transition:"width 1000ms linear 0s"}})),a.createElement("ul",{className:we.a["progress-bar"]},t.map((function(e,t){return a.createElement("li",{className:"".concat(we.a.section," ").concat(t<=n&&we.a.visited," ").concat(t==n&&we.a.current),style:{width:l},onClick:r&&function(){t<n&&r(t)}},e)})))))},Oe=function(e){var t=e.video,n=e.onSelect,r=a.useState(),l=Object(u.a)(r,2),c=l[0],o=l[1];return a.useEffect((function(){ae(t).then((function(e){o(e)}))}),[]),c&&c.length?a.createElement(b.a,{xs:"12"},a.createElement(Q.a,null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"ID Supporto"),a.createElement("th",null))),a.createElement("tbody",null,c.map((function(e){return a.createElement("tr",{key:e.id},a.createElement("td",null,e.id),a.createElement("td",null,a.createElement(k.a,{onClick:function(){return n(e)}},"Seleziona")))}))))):a.createElement("p",null,"Nessun supporto")},je=function(e){var t=e.onSelect,n=a.useState(),r=Object(u.a)(n,2),l=r[0],c=r[1];return a.useEffect((function(){K().then((function(e){c(e)}))}),[]),l?a.createElement(a.Fragment,null,l.map((function(e){return a.createElement(b.a,{xs:"3"},a.createElement(x.a,null,a.createElement(re.a,null,e.giorni," giorni"),a.createElement(S.a,null,a.createElement("p",null,a.createElement("strong",null,"Costo fisso:")," ",e.importo_iniziale),a.createElement("p",null,a.createElement("strong",null,"Costo per ogni giorno successivo:")," ",e.importo_gg_successivi),a.createElement(k.a,{onClick:function(){return t(e)}},"Seleziona"))))}))):a.createElement(ie,null)},ke=function(e){var t=e.cliente,n=e.video,r=e.supporto,l=e.termine;return t||n||r||l?a.createElement(b.a,{xs:"12"},a.createElement(v.a,{className:"bg-warning p-3 align-items-stretch mb-4"},t&&a.createElement(b.a,{xs:"12",sm:"4"},a.createElement(he,{cliente:t})),n&&a.createElement(b.a,{xs:"12",sm:"4"},a.createElement(ve,{video:n})),r&&a.createElement(b.a,{xs:"12",sm:"4"},a.createElement(be,{supporto:r})),l&&a.createElement(b.a,{xs:"12",sm:"4"},a.createElement(ge,{termine:l})))):null},ye=["Seleziona il cliente","Seleziona il video","Seleziona il supporto","Seleziona il termine di noleggio","Conferma i dati di noleggio","Completato"],_e=function(){var e=a.useState(),t=Object(u.a)(e,2),n=t[0],r=t[1],l=a.useState(0),c=Object(u.a)(l,2),o=c[0],s=c[1],i=a.useState(),m=Object(u.a)(i,2),E=m[0],p=m[1],d=a.useState(),f=Object(u.a)(d,2),h=f[0],v=f[1],x=a.useState(),S=Object(u.a)(x,2),w=S[0],C=S[1],O=a.useState(),j=Object(u.a)(O,2),y=j[0],_=j[1],N=a.useState(),T=Object(u.a)(N,2),z=T[0],I=T[1],L=a.useCallback((function(e){p(e),s(1)}),[]),P=a.useCallback((function(e){v(e),s(2)}),[]),B=a.useCallback((function(e){C(e),s(3)}),[]),G=a.useCallback((function(e){I(e),s(4)}),[]);a.useEffect((function(){switch(o){case 0:p(void 0);case 1:v(void 0);case 2:C(void 0);case 3:I(void 0)}}),[o]);var D=a.useCallback((function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(void 0),t.next=4,g.a.awrap(me(E.cod_fiscale,z.giorni,w.id));case 4:e=t.sent,_(e),s(5),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r(t.t0.message);case 12:case"end":return t.stop()}}),null,null,[[0,9]])}),[E,z,w]);return a.createElement(Y,{titolo:"Attiva noleggio",errore:n},a.createElement(Ce,{steps:ye,corrente:o,stepClick:s}),a.createElement(ke,{cliente:E,video:h,supporto:w,termine:z}),0===o&&a.createElement(fe,{onSelect:L}),1===o&&a.createElement(oe,{onSelect:P}),2===o&&a.createElement(Oe,{video:h.id,onSelect:B}),3===o&&a.createElement(je,{onSelect:G}),4===o&&a.createElement(b.a,{xs:"12"},a.createElement(k.a,{onClick:D},"Conferma il noleggio")),5===o&&a.createElement(b.a,{xs:"12"},"Noleggio confermato con ID ",y))},Ne=function(e){var t=e.cod_fiscale,n=e.onSelect,r=a.useState(),l=Object(u.a)(r,2),c=l[0],o=l[1];return a.useEffect((function(){pe(t).then((function(e){o(e)}))}),[t]),c?a.createElement(b.a,{xs:"12"},a.createElement(Q.a,null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Id"),a.createElement("th",null,"Data inizio"),a.createElement("th",null,"Data fine"),a.createElement("th",null,"Termine noleggio"),a.createElement("th",null,"Titolo"),a.createElement("th",null))),a.createElement("tbody",null,c.map((function(e){return a.createElement("tr",{key:e.id},a.createElement("td",null,e.data_inizio),a.createElement("td",null,e.data_fine),a.createElement("td",null,e.termine_noleggio," giorni"),a.createElement("td",null,e.titolo),a.createElement("td",null,a.createElement(k.a,{onClick:function(){return n(e)}},"Seleziona")))}))))):a.createElement(ie,null)},Te=function(e){var t=e.onSelect,n=a.useState(),r=Object(u.a)(n,2),l=r[0],c=r[1],o=a.useCallback((function(e){c(e.target.value)}),[]),s=a.useCallback((function(){l&&t(l)}),[l,t]);return a.createElement(b.a,{xs:"12"},a.createElement(C.a,null,a.createElement(O.a,null,"Stato del supporto"),a.createElement(j.a,{type:"select",onChange:o},!l&&a.createElement("option",{id:""},"Seleziona"),a.createElement("option",{value:"BUONO"},"Buono stato"),a.createElement("option",{value:"DANNEGGIATO"},"Supporto danneggiato"))),a.createElement(C.a,null,a.createElement(k.a,{disabled:!l,onClick:s},"Conferma la restituzione del supporto")))},ze=function(e){var t=e.cliente,n=e.noleggio;return t||n?a.createElement(b.a,{xs:"12"},a.createElement(v.a,{className:"bg-warning p-3 align-items-stretch mb-4"},t&&a.createElement(b.a,{xs:"12",sm:"6"},a.createElement(he,{cliente:t})),n&&a.createElement(b.a,{xs:"12",sm:"6"},a.createElement(xe,{noleggio:n})))):null},Ie=["Seleziona il cliente","Seleziona il noleggio","Seleziona lo stato del supporto","Completato"],Le=function(){var e=a.useState(),t=Object(u.a)(e,2),n=t[0],r=t[1],l=a.useState(0),c=Object(u.a)(l,2),o=c[0],s=c[1],i=a.useState(),m=Object(u.a)(i,2),E=m[0],p=m[1],d=a.useState(),f=Object(u.a)(d,2),h=f[0],v=f[1],x=a.useState(),S=Object(u.a)(x,2),w=S[0],C=S[1],O=a.useCallback((function(e){p(e),s(1)}),[]),j=a.useCallback((function(e){v(e),s(2)}),[]),k=a.useCallback((function(e){var t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(void 0),n.next=4,g.a.awrap(Ee(h.id,e));case 4:t=n.sent,C(t),s(3),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),r(n.t0.message);case 12:case"end":return n.stop()}}),null,null,[[0,9]])}),[h]);return a.useEffect((function(){switch(o){case 0:p(void 0);case 1:v(void 0)}}),[o]),a.createElement(Y,{titolo:"Termina noleggio",errore:n},a.createElement(Ce,{steps:Ie,corrente:o,stepClick:s}),a.createElement(ze,{cliente:E,noleggio:h}),0===o&&a.createElement(fe,{onSelect:O}),1===o&&a.createElement(Ne,{cod_fiscale:E.cod_fiscale,onSelect:j}),2===o&&a.createElement(Te,{onSelect:k}),3===o&&a.createElement(b.a,{xs:"12"},a.createElement("p",null,"Noleggio completato. Costo: ",w)))},Pe=n(73),Be=n.n(Pe),Ge=(n(128),function(e){var t=60*e.getTimezoneOffset()*1e3,n=e.getTime()-t;return new Date(n).toISOString().slice(0,10)}),De=function(e){var t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(P("/statistiche/".concat(Ge(e),"/impiegati"),{method:"GET"}));case 2:return t=n.sent,n.abrupt("return",t.json());case 4:case"end":return n.stop()}}))},Ae=function(e){var t=e.stats;return a.createElement(b.a,{xs:"12"},a.createElement(Q.a,null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Punto vendita"),a.createElement("th",null,"Matricola"),a.createElement("th",null,"Nome"),a.createElement("th",null,"Numero noleggi"),a.createElement("th",null,"Totale incasso"))),a.createElement("tbody",null,t.map((function(e){return a.createElement("tr",{key:e.punto_vendita},a.createElement("td",null,e.matricola),a.createElement("td",null,e.cognome," ",e.nome),a.createElement("td",null,e.num_noleggi),a.createElement("td",null,e.totale_incasso))})))))},Fe=function(){var e=a.useMemo((function(){return new Date}),[]),t=a.useState(),n=Object(u.a)(t,2),r=n[0],l=n[1],c=a.useState(!1),o=Object(u.a)(c,2),s=o[0],i=o[1],m=a.useState(),E=Object(u.a)(m,2),p=E[0],d=E[1],f=a.useState(),x=Object(u.a)(f,2),S=x[0],w=x[1],j=a.useCallback((function(e){Array.isArray(e)||(d(e),w(void 0))}),[]),y=a.useCallback((function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i(!0),t.next=4,g.a.awrap(De(p));case 4:e=t.sent,w(e),i(!1),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),l(t.t0),i(!1);case 13:case"end":return t.stop()}}),null,null,[[0,9]])}),[p]);return a.createElement(h.a,null,a.createElement(v.a,null,a.createElement(b.a,{xs:"12"},a.createElement("h1",null,"Statistiche per dipendente")),a.createElement(b.a,{xs:"12"},a.createElement(R,{error:r})),a.createElement(b.a,{xs:"12",sm:!0},a.createElement(C.a,null,a.createElement(O.a,null,"Giorno"),a.createElement(Be.a,{className:"form-control datepicker_cust",onChange:j,value:p,maxDate:e}))),a.createElement(b.a,{xs:"12",sm:"auto",className:"d-flex align-items-end"},a.createElement(C.a,null,a.createElement(k.a,{disabled:!p,onClick:y},"Cerca")))),a.createElement(v.a,null,s?a.createElement(ie,null):null,S&&a.createElement(Ae,{stats:S})))},Re=n(163),Je=n(164),Ue=n(165),We=n(166),Me=n(167),Ze=n(170),He=n(169),Qe=n(168),Ve=n(162),qe=(n(161),function(e){var t=e.href,n=e.children,r=Object(U.a)(e,["href","children"]),l=Object(d.f)(),c=a.useCallback((function(){t&&l.push(t)}),[t,l]);return a.createElement(Ve.a,Object.assign({onClick:c},r),n)}),Ke=function(){var e=m(),t=Object(u.a)(e,2),n=t[0],r=t[1],l=a.useState(!1),c=Object(u.a)(l,2),o=c[0],s=c[1],i=a.useCallback((function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.awrap(G());case 3:return e.prev=3,r({isLoggedIn:!1,user:void 0}),e.finish(3);case 6:case"end":return e.stop()}}),null,null,[[0,,3,6]])}),[r]),E=n.isLoggedIn&&n.user&&"DIRIGENTE"===n.user.tipo,p=n.isLoggedIn&&n.user;return a.createElement(Re.a,{color:"light",light:!0,expand:"md",sticky:"top"},a.createElement(Je.a,null,a.createElement("i",{className:"fas fa-cat fa-3x"})),a.createElement(Ue.a,{onClick:function(){return s(!o)}}),a.createElement(We.a,{isOpen:o,navbar:!0},a.createElement(Me.a,{className:"mr-auto",navbar:!0},p&&a.createElement(Ze.a,{nav:!0,inNavbar:!0},a.createElement(He.a,{nav:!0,caret:!0},"Ricerca"),a.createElement(Qe.a,{right:!0},a.createElement(qe,{href:"/ricerca/titolo"},"Ricerca per titolo"),a.createElement(Ve.a,{divider:!0}),a.createElement(qe,{href:"/ricerca/genere"},"Ricerca per genere"))),p&&a.createElement(Ze.a,{nav:!0,inNavbar:!0},a.createElement(He.a,{nav:!0,caret:!0},"Noleggio"),a.createElement(Qe.a,{right:!0},a.createElement(qe,{href:"/nuovocliente"},"Nuovo cliente"),a.createElement(Ve.a,{divider:!0}),a.createElement(qe,{href:"/noleggio/attiva"},"Crea contratto di noleggio"),a.createElement(Ve.a,{divider:!0}),a.createElement(qe,{href:"/noleggio/termina"},"Termina contratto di noleggio"))),E&&a.createElement(Ze.a,{nav:!0,inNavbar:!0},a.createElement(He.a,{nav:!0,caret:!0},"Batch"),a.createElement(Qe.a,{right:!0},a.createElement(qe,{href:"/batch/carico"},"Carico"),a.createElement(Ve.a,{divider:!0}),a.createElement(qe,{href:"/batch/scarico"},"Scarico"),a.createElement(Ve.a,{divider:!0}),a.createElement(qe,{href:"/batch/carico"},"Mostra tutte le attivit\xe0 batch"))),E&&a.createElement(Ze.a,{nav:!0,inNavbar:!0},a.createElement(He.a,{nav:!0,caret:!0},"Statistiche"),a.createElement(Qe.a,{right:!0},a.createElement(qe,{href:"/statistiche/dipendente"},"Per dipendente del tuo punto vendita"),a.createElement(Ve.a,{divider:!0}),a.createElement(qe,{href:"/statistiche"},"Per tutti i punti vendita")))),p&&a.createElement(Me.a,{navbar:!0},a.createElement(Ze.a,{nav:!0,inNavbar:!0},a.createElement(He.a,{nav:!0,caret:!0},a.createElement("i",{className:"far fa-user-circle"}),n.user.nome," ",n.user.cognome),a.createElement(Qe.a,{right:!0},a.createElement(Ve.a,{onClick:i},"Log out"))))))};var Xe=function(){return r.a.createElement(p.a,{basename:"/noleggio/webapp"},r.a.createElement(E,null,r.a.createElement(h.a,null,r.a.createElement(Ke,null),r.a.createElement(d.b,{exact:!0,path:"/login"},r.a.createElement(J,null)),r.a.createElement(W,{path:"/batch/scarico"},r.a.createElement($,null)),r.a.createElement(W,{path:"/batch/carico"},r.a.createElement(te,null)),r.a.createElement(W,{path:"/ricerca/titolo"},r.a.createElement(ue,null)),r.a.createElement(W,{path:"/noleggio/attiva"},r.a.createElement(_e,null)),r.a.createElement(W,{path:"/noleggio/termina"},r.a.createElement(Le,null)),r.a.createElement(d.b,{path:"/statistiche/dipendente"},r.a.createElement(Fe,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(143);c.a.render(r.a.createElement(Xe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},24:function(e,t,n){e.exports={"progress-bar":"Steps_progress-bar__3ZWGR",section:"Steps_section__2kTmZ","status-bar":"Steps_status-bar__22kXB","current-status":"Steps_current-status__1RWxy",visited:"Steps_visited__1WHz1",changeBackground:"Steps_changeBackground__18NKB",current:"Steps_current__cNQWZ"}},79:function(e,t,n){e.exports=n(144)},84:function(e,t,n){},85:function(e,t,n){}},[[79,1,2]]]);
//# sourceMappingURL=main.044f3068.chunk.js.map